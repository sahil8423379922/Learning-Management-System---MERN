<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sub Module</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <form action="/submodule" method="POST" id="myForm">
      <div class="fs-4 mt-3" id="submoduleTitle">{{data}}</div>
      <div class="row mt-1">
        <div class="col-10">
          <input type="text" class="form-control" id="name" name="name" aria-describedby="emailHelp">
        </div>
        <div class="col-2">
          
          <input type="hidden" name="data">
          <input type="hidden" name="data1">
          <!-- Add data-module attribute to the button -->
          <button type="submit" class="btn btn-dark" data-module="{{data}}">Add Sub Module</button>
        </div>
      </div>
    </form>
    <div class="pt-5 fs-4 fw-semibold">Available sub Modules</div> 
    <div class="row">
      {{#each datamodals}}
      <div class="col m-0 p-0 col-3 px-2 py-2">
      <div class="card">
  <div class="card-body">
    <h5 class="card-title fs-5">{{this}}</h5>
    <div class="row mt-3">
      <center>
      <button type="button" class="btn btn-success col-5 me-3 openPopupBtn">Edit</button>
      <button type="button" class="btn btn-danger col-5 deletePopupBtn">Delete</button>
</center>
    </div>
  </div>
  </div>
</div>
      

      {{/each}}

    </div> 
  </div>
  

  <!-- Include jQuery library -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Handle button click event
      $('.btn.btn-dark').click(function() {
        // Retrieve the data from the data-module attribute of the clicked button
        var dataToSend = $(this).data('module');
        // Log the received data to the console
        console.log("Data Received on button click: " + dataToSend);

        // Set the value of the input field with name 'data' to the received data
        $('input[name="data"]').val(dataToSend);
       

        // Submit the form with id 'myForm'
        $('#myForm').submit(); 
      });
    });


    //Java Script to open popup for update
    $(document).ready(function () {
      $('.openPopupBtn').click(function () {
        var moduleData = $(this).data('module');
        $('#moduleData').val(moduleData);
        $('#previousmoduledata').val(moduleData);
        $('#exampleModal').modal('show');
      });
    });

//Java Script to open pop up for delete
     $(document).ready(function () {
      $('.deletePopupBtn').click(function () {
        var moduleData = $(this).data('module');
        $('#data').val(moduleData);
        $('#deleteModal').modal('show');
      });
    });



  </script>
</body>
</html>
